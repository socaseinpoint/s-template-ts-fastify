# =======================
# Environment Configuration
# =======================

# Environment mode (development, production, test)
NODE_ENV=development

# Server configuration
PORT=3000
HOST=0.0.0.0
LOG_LEVEL=info

# =======================
# Database (PostgreSQL)
# =======================

# REQUIRED in production
# Format: postgresql://user:password@host:port/database?schema=public&connection_limit=20&pool_timeout=20
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/fastify_db?schema=public

# Test database (used in E2E tests)
# TEST_DATABASE_URL=postgresql://testuser:testpassword@localhost:5433/fastify_test

# =======================
# Redis (Optional - falls back to in-memory)
# =======================

# Option 1: Full URL (recommended)
REDIS_URL=redis://localhost:6379

# Option 2: Individual parameters
# REDIS_HOST=127.0.0.1
# REDIS_PORT=6379
# REDIS_PASSWORD=your-redis-password

# =======================
# Security (REQUIRED)
# =======================

# JWT Secret - MUST be strong (64+ characters) in production
# Generate with: openssl rand -base64 64
JWT_SECRET=CHANGE-ME-GENERATE-WITH-OPENSSL-RAND-BASE64-64-CHARS-MINIMUM-LENGTH
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# API Key (optional, for service-to-service auth)
# API_KEY=your-api-key

# =======================
# CORS Configuration
# =======================

# In development: use * (wildcard)
# In production: MUST set specific domains (comma-separated)
# Example: https://app.example.com,https://admin.example.com
CORS_ORIGIN=*

# =======================
# Rate Limiting
# =======================

ENABLE_RATE_LIMIT=true
RATE_LIMIT_MAX=100
RATE_LIMIT_TIMEWINDOW=60000

# =======================
# Feature Flags
# =======================

# Enable Swagger/OpenAPI documentation
# Automatically disabled in production (override with ENABLE_SWAGGER=true)
ENABLE_SWAGGER=true

# Enable metrics endpoint
ENABLE_METRICS=false

# Enable health check endpoint
ENABLE_HEALTH_CHECK=true

# =======================
# Service Information
# =======================

SERVICE_NAME=fastify-service
SERVICE_VERSION=1.0.0

# =======================
# Production Checklist
# =======================

# Before deploying to production, ensure:
# ✅ JWT_SECRET is 64+ chars generated with openssl rand -base64 64
# ✅ CORS_ORIGIN is set to specific domains (NOT *)
# ✅ DATABASE_URL points to production database
# ✅ REDIS_URL is configured for distributed rate limiting
# ✅ ENABLE_SWAGGER is false (or removed)
# ✅ NODE_ENV=production
# ✅ Strong database password
# ✅ Redis password if exposed to public network
# ✅ LOG_LEVEL set to 'info' or 'warn' (not 'debug')
